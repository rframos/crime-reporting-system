<div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark shadow" style="width: 260px; height: 100vh; position: fixed; left: 0; top: 0;">
    <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        <span class="fs-4 fw-bold text-warning">ğŸ›¡ï¸ SafeCity SJDM</span>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
            <a href="/" class="nav-link text-white {{ 'active' if request.path == '/' }}">
                ğŸ  Home Dashboard
            </a>
        </li>
        <li>
            <a href="/heatmap" class="nav-link text-white {{ 'active' if request.path == '/heatmap' }}">
                ğŸ“ Incident Heatmap
            </a>
        </li>
        <li>
            <a href="/reports" class="nav-link text-white {{ 'active' if request.path == '/reports' }}">
                ğŸ“‹ Incident Reports
            </a>
        </li>
        
        {% if current_user.role == 'Admin' %}
        <li class="mt-3">
            <small class="text-uppercase text-muted px-3" style="font-size: 0.7rem;">Administration</small>
        </li>
        <li>
            <a href="/cnn-admin" class="nav-link text-white {{ 'active' if request.path == '/cnn-admin' }}">
                âš™ï¸ CNN Intelligence
            </a>
        </li>
        {% endif %}

        {% if current_user.role in ['Police Officer', 'Barangay Official'] %}
        <li class="mt-3">
            <small class="text-uppercase text-muted px-3" style="font-size: 0.7rem;">Officer Tools</small>
        </li>
        <li>
            <a href="/contacts" class="nav-link text-white {{ 'active' if request.path == '/contacts' }}">
                ğŸ“ Dispatch Contacts
            </a>
        </li>
        {% endif %}
    </ul>
    <hr>
    <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
            <div class="rounded-circle bg-primary me-2 d-flex align-items-center justify-content-center" style="width: 32px; height: 32px; font-size: 12px;">
                {{ current_user.username[:2]|upper }}
            </div>
            <strong>{{ current_user.username }}</strong>
        </a>
        <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
            <li><span class="dropdown-item-text text-muted small">Role: {{ current_user.role }}</span></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="/logout">Sign out</a></li>
        </ul>
    </div>
</div>

<style>
    .nav-link:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }
    .nav-link.active {
        background-color: #0038A8 !important; /* SJDM Official Blue */
        color: #FFD700 !important; /* SJDM Official Gold */
    }
    body {
        padding-left: 260px; /* Offset for the fixed sidebar */
    }
</style>
